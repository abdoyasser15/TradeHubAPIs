2025-11-16 15:38:30.629 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 15:38:30.714 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 15:38:30.721 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 15:38:30.731 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 15:38:30.750 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 15:38:30.769 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 15:38:30.914 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 15:38:31.108 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 15:38:31.212 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 15:38:31.214 +02:00 [INF] Hosting environment: Development
2025-11-16 15:38:31.215 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 15:38:32.090 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 15:38:32.304 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 269.6105ms
2025-11-16 15:38:32.354 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 15:38:32.355 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 15:38:32.367 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.9536ms
2025-11-16 15:38:32.404 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.1547ms
2025-11-16 15:38:33.497 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 15:38:33.555 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.4727ms
2025-11-16 15:42:04.508 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 15:42:04.583 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 15:42:04.588 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 15:42:04.592 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 15:42:04.608 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 15:42:04.623 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 15:42:04.751 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 15:42:04.884 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 15:42:04.969 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 15:42:04.976 +02:00 [INF] Hosting environment: Development
2025-11-16 15:42:04.978 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 15:42:06.961 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 15:42:07.185 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 239.5898ms
2025-11-16 15:42:07.237 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 15:42:07.237 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 15:42:07.245 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 8.6053ms
2025-11-16 15:42:07.280 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.2631ms
2025-11-16 15:42:08.245 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 15:42:08.299 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.2769ms
2025-11-16 16:58:15.137 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 16:58:15.220 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 16:58:15.227 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 16:58:15.231 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 16:58:15.252 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 16:58:15.270 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 16:58:15.414 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 16:58:15.592 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 16:58:15.732 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 16:58:15.741 +02:00 [INF] Hosting environment: Development
2025-11-16 16:58:15.745 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 16:58:16.233 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 16:58:16.460 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 244.8993ms
2025-11-16 16:58:16.519 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 16:58:16.520 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 16:58:16.533 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.9866ms
2025-11-16 16:58:16.560 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.7488ms
2025-11-16 16:58:17.557 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 16:58:17.608 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 50.7017ms
2025-11-16 16:58:30.942 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/api/category - null null
2025-11-16 16:58:30.954 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 16:58:31.024 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.GetCategories (TradeHub)'
2025-11-16 16:58:31.052 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IReadOnlyList`1[TradHub.Core.Dtos.CategoryDto]]] GetCategories() on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 16:58:31.161 +02:00 [INF] Fetching all categories from the database.
2025-11-16 16:58:31.356 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[IsActive], [c].[Name]
FROM [Categories] AS [c]
2025-11-16 16:58:31.408 +02:00 [INF] Fetched 1 categories from the database.
2025-11-16 16:58:31.419 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[TradHub.Core.Dtos.CategoryDto, TradHub.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-16 16:58:31.430 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.GetCategories (TradeHub) in 371.257ms
2025-11-16 16:58:31.433 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.GetCategories (TradeHub)'
2025-11-16 16:58:31.437 +02:00 [INF] HTTP GET /api/category responded 200 in 483.5940 ms
2025-11-16 16:58:31.446 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/api/category - 200 null application/json; charset=utf-8 504.026ms
2025-11-16 18:07:30.108 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:07:30.189 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:07:30.195 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:07:30.198 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:07:30.215 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 18:07:30.234 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 18:07:30.367 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 18:07:30.506 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 18:07:30.611 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:07:30.613 +02:00 [INF] Hosting environment: Development
2025-11-16 18:07:30.618 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 18:07:31.505 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 18:07:31.739 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 247.1919ms
2025-11-16 18:07:31.799 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 18:07:31.799 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:07:31.812 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 13.0949ms
2025-11-16 18:07:31.848 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.8777ms
2025-11-16 18:07:32.817 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 18:07:32.869 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.7211ms
2025-11-16 18:08:11.238 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - null 0
2025-11-16 18:08:11.249 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:08:11.576 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:08:11 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-16 18:08:11.612 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:08:11 PM'.
2025-11-16 18:08:11.617 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:08:11.651 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:08:11.677 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-16 18:08:11.703 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 45.5759ms
2025-11-16 18:08:11.705 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:08:11.708 +02:00 [INF] HTTP POST /api/category responded 415 in 460.2487 ms
2025-11-16 18:08:11.714 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 415 null application/problem+json; charset=utf-8 476.807ms
2025-11-16 18:09:33.804 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 10
2025-11-16 18:09:33.819 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:09:33 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-16 18:09:33.822 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:09:33 PM'.
2025-11-16 18:09:33.824 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:09:33.825 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:09:33.846 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiValidationErrorResponse'.
2025-11-16 18:09:33.849 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 20.8022ms
2025-11-16 18:09:33.852 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:09:33.854 +02:00 [INF] HTTP POST /api/category responded 400 in 39.6069 ms
2025-11-16 18:09:33.858 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 54.1779ms
2025-11-16 18:10:25.385 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:10:25.468 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:10:25.474 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:10:25.477 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:10:25.493 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 18:10:25.509 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 18:10:25.633 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 18:10:25.767 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 18:10:25.878 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:10:25.885 +02:00 [INF] Hosting environment: Development
2025-11-16 18:10:25.887 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 18:10:28.656 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 18:10:28.899 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 256.0169ms
2025-11-16 18:10:28.965 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:10:28.965 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 18:10:28.981 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 17.1165ms
2025-11-16 18:10:29.024 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.9104ms
2025-11-16 18:10:30.011 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 18:10:30.061 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 49.5527ms
2025-11-16 18:10:38.985 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 10
2025-11-16 18:10:38.997 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:10:39.112 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:10:39 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-16 18:10:39.136 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:10:39 PM'.
2025-11-16 18:10:39.142 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:10:39.171 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:10:39.217 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiValidationErrorResponse'.
2025-11-16 18:10:39.228 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 49.2285ms
2025-11-16 18:10:39.230 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:10:39.234 +02:00 [INF] HTTP POST /api/category responded 400 in 237.5561 ms
2025-11-16 18:10:39.241 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 255.7614ms
2025-11-16 18:11:47.020 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 10
2025-11-16 18:11:47.030 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:11:47.032 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:11:47.037 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiValidationErrorResponse'.
2025-11-16 18:11:47.038 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 4.7667ms
2025-11-16 18:11:47.041 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:11:47.043 +02:00 [INF] HTTP POST /api/category responded 400 in 14.2083 ms
2025-11-16 18:11:47.046 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 25.7701ms
2025-11-16 18:11:55.475 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 10
2025-11-16 18:11:55.480 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:11:55.482 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:11:55.488 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiValidationErrorResponse'.
2025-11-16 18:11:55.490 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 5.6916ms
2025-11-16 18:11:55.492 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:11:55.493 +02:00 [INF] HTTP POST /api/category responded 400 in 14.1653 ms
2025-11-16 18:11:55.495 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 20.7858ms
2025-11-16 18:12:07.599 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:12:07.672 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:12:07.679 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:12:07.682 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:12:07.699 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 18:12:07.717 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 18:12:07.861 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 18:12:07.997 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 18:12:08.083 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:12:08.085 +02:00 [INF] Hosting environment: Development
2025-11-16 18:12:08.092 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 18:12:10.870 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 18:12:11.074 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 212.6614ms
2025-11-16 18:12:11.118 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:12:11.118 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 18:12:11.127 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 9.4507ms
2025-11-16 18:12:11.170 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.2302ms
2025-11-16 18:12:12.103 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 18:12:12.156 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 52.6664ms
2025-11-16 18:12:14.339 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 10
2025-11-16 18:12:14.351 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:12:14.417 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:12:14.451 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:12:14.492 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiValidationErrorResponse'.
2025-11-16 18:12:14.500 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 43.7427ms
2025-11-16 18:12:14.503 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:12:14.506 +02:00 [INF] HTTP POST /api/category responded 400 in 155.7598 ms
2025-11-16 18:12:14.512 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 172.9925ms
2025-11-16 18:15:35.859 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 45
2025-11-16 18:15:35.870 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:15:35.872 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:15:35.883 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiValidationErrorResponse'.
2025-11-16 18:15:35.885 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 10.323ms
2025-11-16 18:15:35.887 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:15:35.888 +02:00 [INF] HTTP POST /api/category responded 400 in 19.5928 ms
2025-11-16 18:15:35.891 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 32.4487ms
2025-11-16 18:16:01.536 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 52
2025-11-16 18:16:01.545 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:16:01.546 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:16:01.555 +02:00 [INF] Adding new category
2025-11-16 18:16:02.176 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([IsActive], [Name])
OUTPUT INSERTED.[CategoryId]
VALUES (@p0, @p1);
2025-11-16 18:16:02.204 +02:00 [INF] Category RealState added Successfully
2025-11-16 18:16:02.208 +02:00 [INF] Executing OkObjectResult, writing value of type 'TradHub.Core.Dtos.CategoryDto'.
2025-11-16 18:16:02.212 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 663.0429ms
2025-11-16 18:16:02.215 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:16:02.218 +02:00 [INF] HTTP POST /api/category responded 200 in 674.9016 ms
2025-11-16 18:16:02.225 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 200 null application/json; charset=utf-8 689.5395ms
2025-11-16 18:17:29.617 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 52
2025-11-16 18:17:29.627 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:17:29.628 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:17:29.632 +02:00 [INF] Adding new category
2025-11-16 18:17:29.692 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([IsActive], [Name])
OUTPUT INSERTED.[CategoryId]
VALUES (@p0, @p1);
2025-11-16 18:17:30.069 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TradeHub.Repository.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Categories' with unique index 'IX_Categories_Name'. The duplicate key value is (RealState).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:232bf4df-1605-4398-998a-891602f6e4d9
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Categories' with unique index 'IX_Categories_Name'. The duplicate key value is (RealState).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:232bf4df-1605-4398-998a-891602f6e4d9
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-16 18:17:30.146 +02:00 [ERR] Error occurred while adding category: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Categories' with unique index 'IX_Categories_Name'. The duplicate key value is (RealState).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:232bf4df-1605-4398-998a-891602f6e4d9
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TradeHub.Service.CategoryService.AddAsync(CategoryDto category) in F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub.Service\CategoryService.cs:line 71
2025-11-16 18:17:30.235 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 604.4829ms
2025-11-16 18:17:30.239 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:17:30.313 +02:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Categories' with unique index 'IX_Categories_Name'. The duplicate key value is (RealState).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:232bf4df-1605-4398-998a-891602f6e4d9
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TradeHub.Service.CategoryService.AddAsync(CategoryDto category) in F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub.Service\CategoryService.cs:line 71
   at TradeHub.Controllers.CategoryController.AddCategory(CategoryDto categoryDto) in F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub\Controllers\CategoryController.cs:line 50
   at lambda_method22(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at TradeHub.MiddleWares.ExceptionMiddleware.InvokeAsync(HttpContext context) in F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub\MiddleWares\ExceptionMiddleware.cs:line 22
2025-11-16 18:17:30.341 +02:00 [ERR] HTTP POST /api/category responded 500 in 714.2442 ms
2025-11-16 18:17:30.344 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 500 null application/json 727.0856ms
2025-11-16 18:26:33.501 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:26:33.577 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:26:33.584 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:26:33.587 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:26:33.604 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 18:26:33.620 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 18:26:33.746 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 18:26:33.891 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 18:26:33.974 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:26:33.980 +02:00 [INF] Hosting environment: Development
2025-11-16 18:26:33.982 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 18:26:35.515 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 18:26:35.721 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 217.8083ms
2025-11-16 18:26:35.754 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:26:35.763 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 18:26:35.765 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 11.6215ms
2025-11-16 18:26:35.826 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.1883ms
2025-11-16 18:26:36.818 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 18:26:36.866 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 48.289ms
2025-11-16 18:26:40.890 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 52
2025-11-16 18:26:40.900 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:26:40.970 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:26:41.007 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:26:41.408 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__category_Name_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[IsActive], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Name] = @__category_Name_0
2025-11-16 18:26:41.468 +02:00 [WRN] Duplicate category name: RealState
2025-11-16 18:26:41.513 +02:00 [WRN] Duplicate error: Category 'RealState' already exists.
2025-11-16 18:26:41.572 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiResponse'.
2025-11-16 18:26:41.582 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 568.8579ms
2025-11-16 18:26:41.585 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:26:41.589 +02:00 [INF] HTTP POST /api/category responded 400 in 689.3452 ms
2025-11-16 18:26:41.600 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 710.7304ms
2025-11-16 18:33:11.453 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:33:11.526 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:33:11.532 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:33:11.535 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:33:11.554 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 18:33:11.572 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 18:33:11.716 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 18:33:11.885 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 18:33:11.974 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:33:11.976 +02:00 [INF] Hosting environment: Development
2025-11-16 18:33:11.979 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 18:33:12.966 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 18:33:13.194 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 235.044ms
2025-11-16 18:33:13.266 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 18:33:13.271 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:33:13.299 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 28.2241ms
2025-11-16 18:33:13.342 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.6449ms
2025-11-16 18:33:14.502 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 18:33:14.552 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 50.0119ms
2025-11-16 18:33:15.458 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5161/api/category - application/json 52
2025-11-16 18:33:15.469 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:33:15.554 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:33:15.590 +02:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] AddCategory(TradHub.Core.Dtos.CategoryDto) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:33:15.896 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__category_Name_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[IsActive], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[Name] = @__category_Name_0
2025-11-16 18:33:15.962 +02:00 [WRN] Duplicate category name: RealState
2025-11-16 18:33:16.017 +02:00 [WRN] Duplicate error: Category 'RealState' already exists.
2025-11-16 18:33:16.087 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiResponse'.
2025-11-16 18:33:16.097 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.AddCategory (TradeHub) in 499.3463ms
2025-11-16 18:33:16.099 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.AddCategory (TradeHub)'
2025-11-16 18:33:16.105 +02:00 [INF] HTTP POST /api/category responded 400 in 636.4935 ms
2025-11-16 18:33:16.117 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5161/api/category - 400 null application/json; charset=utf-8 659.5367ms
2025-11-16 18:47:20.419 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:47:20.490 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:47:20.495 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:47:20.498 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:47:20.515 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 18:47:20.531 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 18:47:20.658 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 18:47:20.794 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 18:47:20.878 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:47:20.880 +02:00 [INF] Hosting environment: Development
2025-11-16 18:47:20.885 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 18:47:22.064 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 18:47:22.315 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 263.4028ms
2025-11-16 18:47:22.393 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:47:22.393 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 18:47:22.399 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 5.9385ms
2025-11-16 18:47:22.432 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.1122ms
2025-11-16 18:47:23.417 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 18:47:23.462 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.3125ms
2025-11-16 18:47:33.358 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/api/category/-1 - text/plain 65
2025-11-16 18:47:33.369 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:47:33.474 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:47:33 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-16 18:47:33.496 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:47:33 PM'.
2025-11-16 18:47:33.502 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub)'
2025-11-16 18:47:33.532 +02:00 [INF] Route matched with {action = "GetCategoryById", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] GetCategoryById(Int32) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:47:33.549 +02:00 [WRN] Invalid category Id: -1
2025-11-16 18:47:33.611 +02:00 [ERR] Error occurred while fetching category with Id=-1
System.ArgumentException: Category Id must be greater than zero. (Parameter 'id')
   at TradeHub.Service.CategoryService.GetByIdAsync(Int32 id) in F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub.Service\CategoryService.cs:line 47
2025-11-16 18:47:33.684 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiResponse'.
2025-11-16 18:47:33.698 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub) in 159.2032ms
2025-11-16 18:47:33.700 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub)'
2025-11-16 18:47:33.705 +02:00 [INF] HTTP GET /api/category/-1 responded 400 in 334.9549 ms
2025-11-16 18:47:33.710 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/api/category/-1 - 400 null application/json; charset=utf-8 352.2147ms
2025-11-16 18:48:14.682 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:48:14.756 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:48:14.761 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-16 18:48:14.766 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-16 18:48:14.781 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-16 18:48:14.800 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-16 18:48:14.929 +02:00 [INF] User profile is available. Using 'C:\Users\ABDO YASER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 18:48:15.071 +02:00 [INF] Now listening on: http://localhost:5161
2025-11-16 18:48:15.176 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:48:15.180 +02:00 [INF] Hosting environment: Development
2025-11-16 18:48:15.181 +02:00 [INF] Content root path: F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub
2025-11-16 18:48:15.865 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/index.html - null null
2025-11-16 18:48:16.059 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/index.html - 200 null text/html;charset=utf-8 203.2567ms
2025-11-16 18:48:16.091 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:48:16.100 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/_vs/browserLink - null null
2025-11-16 18:48:16.101 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.4085ms
2025-11-16 18:48:16.144 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.6703ms
2025-11-16 18:48:17.123 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - null null
2025-11-16 18:48:17.166 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 42.8328ms
2025-11-16 18:48:22.874 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/api/category/-1 - text/plain 65
2025-11-16 18:48:22.886 +02:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:48:22.993 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:48:22 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-16 18:48:23.019 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:48:22 PM'.
2025-11-16 18:48:23.026 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub)'
2025-11-16 18:48:23.055 +02:00 [INF] Route matched with {action = "GetCategoryById", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] GetCategoryById(Int32) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:48:23.072 +02:00 [WRN] Invalid category Id: -1
2025-11-16 18:48:23.128 +02:00 [ERR] Error occurred while fetching category with Id=-1
System.ArgumentException: Category Id must be greater than zero.
   at TradeHub.Service.CategoryService.GetByIdAsync(Int32 id) in F:\study\backend\Eng Ahmed Nasr\08 ASP.NET Core Web APIs\TradeHub\TradeHub.Service\CategoryService.cs:line 47
2025-11-16 18:48:23.223 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'TradeHub.Errors.ApiResponse'.
2025-11-16 18:48:23.236 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub) in 173.8027ms
2025-11-16 18:48:23.238 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub)'
2025-11-16 18:48:23.241 +02:00 [INF] HTTP GET /api/category/-1 responded 400 in 355.4473 ms
2025-11-16 18:48:23.247 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/api/category/-1 - 400 null application/json; charset=utf-8 373.1894ms
2025-11-16 18:54:06.387 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5161/api/category/1 - text/plain 65
2025-11-16 18:54:06.403 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:54:06 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-16 18:54:06.405 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/11/2025 4:53:39 PM', Current time (UTC): '16/11/2025 4:54:06 PM'.
2025-11-16 18:54:06.407 +02:00 [INF] Executing endpoint 'TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub)'
2025-11-16 18:54:06.409 +02:00 [INF] Route matched with {action = "GetCategoryById", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[TradHub.Core.Dtos.CategoryDto]] GetCategoryById(Int32) on controller TradeHub.Controllers.CategoryController (TradeHub).
2025-11-16 18:54:06.413 +02:00 [INF] Fetching category with Id=1
2025-11-16 18:54:07.048 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[IsActive], [c].[Name]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__id_0
2025-11-16 18:54:07.103 +02:00 [INF] Category with Id=1 Fetched Successfully
2025-11-16 18:54:07.107 +02:00 [INF] Executing OkObjectResult, writing value of type 'TradHub.Core.Dtos.CategoryDto'.
2025-11-16 18:54:07.112 +02:00 [INF] Executed action TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub) in 700.1113ms
2025-11-16 18:54:07.114 +02:00 [INF] Executed endpoint 'TradeHub.Controllers.CategoryController.GetCategoryById (TradeHub)'
2025-11-16 18:54:07.116 +02:00 [INF] HTTP GET /api/category/1 responded 200 in 715.2927 ms
2025-11-16 18:54:07.124 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5161/api/category/1 - 200 null application/json; charset=utf-8 737.3019ms
